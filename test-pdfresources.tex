% !Mode:: "TeX:DE:UTF-8:Main"
%\input{regression-test}


\documentclass{article}

\usepackage{pdfresources}

%don't compress pdf:
\ExplSyntaxOn
\driver_pdf_compresslevel:n {0}
\driver_pdf_objects_disable:

%\driver_pdf_catalog_gput:nn {Lang}
\ExplSyntaxOff
\usepackage{xcolor}

\usepackage[customdriver=hluatex-experimental,pdfversion=2.0,pdftitle=X,ocgcolorlinks]{hyperref}

%%\tracingmacros=1
\hypersetup{urlbordercolor=blue,linkbordercolor=green,pdfborder={1 1 1},pdfprintpagerange=0}
%%%\makeatletter
\hypupdateattribute
\makeatletter%\tracingmacros=1
\textwidth=5cm
\begin{document}
\makeatletter%\show\Hy@pstringdef
\begin{Form}
\TextField{abc}
\TextField{cde}
abc%\end{document}
%
%\noindent
%\TextField[name=hight,align=0]{Hight [cm]}
%\\
%
%\TextField[name=weight,align=0]{Weight [kg]}
%\\
%
%\noindent
%\TextField[name=BMI, maxlen=4,align=0,readonly=true,
%           calculate={%
%                      var f_hight = this.getField("hight");
%                      var f_weight = this.getField("weight");
%                      event.value = f_weight.value /((f_hight.value/100)*
%   (f_hight.value/100));
%                       }]{BMI}

%\pdfextension obj reserveobjnum
%\the\pdflastobj
%
%\pdfextension obj reserveobjnum
%\the\pdflastobj

\ExplSyntaxOn
%\cs_show:N\driver_pdf_link_last_int:
%
%%\ifnum \driver_pdf_link_last_int: = 0 yes \fi
%
%\ifnum \driver_pdf_link_last_int: = 0 yes \fi
  
%\cs_show:N\driver_pdf_object_new:nn

\driver_pdf_object_new:nn {testobjA}{dict}
\driver_pdf_object_new:nn {testobjB}{dict}
\driver_pdf_object_ref:n {testobjA}
\driver_pdf_object_ref:n {testobjB}
\ExplSyntaxOff
\end{Form}
\end{document}
\newpage

%\prop_show:N\g__pdf_info_dict_prop

xx\driver_pdf_link_begin_user:nnw{}{/A<</Type/Action/S/URI/URI(www.blub.de)>>}
\driver_pdf_link_end:

\driver_pdf_link_begin_goto:nnw{}{Dest} xxx\driver_pdf_link_end:
\PackageInfo{test}{\string\pdf_version_gset:n{<\driver_pdf_version_major:.\driver_pdf_version_minor:}}

%\ExplSyntaxOff
%\end{document}
%\ifnum \driver_pdf_version_minor: = 5 XXXXXXXXX \else YYYYYYY\fi


\hook_put:nnnn
     { pdf }
     { link_begin_url_attr }
     { /C }
     { [1~0~0] }

\hook_put:nnnn
       { pdf }
       { link_begin_url_attr }
       { /Border }
       { [1~1~1] }
\driver_pdf_link_margin:n {1pt}
xx\pdf_link_user:nnn {url}{/A<</Type/Action/S/URI/URI(www.blub.de)>>}{blbl\\blb\par blub}

\par\bigskip
xxx
\driver_pdf_link_begin_user:nnw
 {/C~[1~0~0]
 /Border [0.5~0.5~0.5]}
 {/A<</Type/Action/S/URI/URI(www.blub.de)>>}
 long~text~text~text~text~text~text~text~text
\driver_pdf_link_end:

\url{www.blubblubblub.de}
\section{a}\label{a}
\newpage
\ref{a} \quad
\ExplSyntaxOff
\Acrobatmenu{Find}{Find}
%\hyperlink{blblb}{yabc\\xye\\abc}

\end{document}
\section{a}\label{a}
\ref{a}
\newpage
blblb
\end{document}
%test driver link.
\url{www.blub.de}

%3 0 obj
%<< /Type /Annot /Border[1 1 1]/H/I/C[0 1 1] /Rect [ 147.716 656.179 207.243 664.319 ]
% /Subtype/Link/A<</Type/Action/S/URI/URI(www.blub.de)>>
% >>
%endobj
\leavevmode
\ExplSyntaxOn
\driver_pdf_link_begin_user:nnw
 {
  /Border~[0~0~1]
 }
 {
  /Subtype/Link~
       /A<<
         /Type/Action~
         /S/URI~
         /URI~(http://www.latex-project.org)%
       >>
 }
  some link
\driver_pdf_link_end:
\ExplSyntaxOff

blub
\end{document} 