%% LaTeX2e file `xcolor-patches.sty'
%%
\ProvidesPackage{xcolor-patches-tmp-ltx}[2022-07-08 v0.95q patch xcolor for l3color]

\ExplSyntaxOn
% #1 is the color name
% #2:  model or models
% #3: value: either numbers or a color name
% #4 is the type: named or ps
\cs_gset_protected:Npn \__pdfmanagement_firstaid_xcolor_set:nnnn #1 #2 #3 #4
    {
      \str_case:nnF {#4}
        {
          % we ignore the ps  type for now.
          {ps}{}
          {named}
            {
               \cs_if_exist:cT { __color_parse_model_ #2 :w }
                 {
                    \color_set:nnn {#1}{#2}{#3}
                 }
            }
        }
        {
          \cs_if_exist:cTF { __color_parse_model_ #2 :w }
           {
             \color_set:nnn {#1}{#2}{#3}
           }
           {
             \tl_if_eq:nnTF{#2}{named}%this the model not the type!
               {
                 \color_set:nn{#1}{#3}
               }
               {
                 %this is for multi models, it will break if there is model
                 %l3 doesn't know, but the case is rare, so accept it for now.
                 \str_if_in:nnT {#2}{/}
                  {
                    \color_set:nnn{#1}{#2}{#3}
                  }
               }
           }
        }
    }
\cs_generate_variant:Nn \__pdfmanagement_firstaid_xcolor_set:nnnn {nonn}
\cs_set_eq:NN \@expl@xcolor@set@@nonn \__pdfmanagement_firstaid_xcolor_set:nonn
\cs_generate_variant:Nn \color_set:nn {ne}
\tl_new:N\l__pdfmanagement_firstaid_tmpa_tl
% the color name should be sanitized to avoid problems with e.g. french making ! active
\cs_new_protected:Npn \__pdfmanagement_firstaid_xcolor_set:nn #1 #2
   {
     \XC@edef\l__pdfmanagement_firstaid_tmpa_tl{#2}
     \exp_args:NV \__color_if_defined:nT \l__pdfmanagement_firstaid_tmpa_tl
       { \color_set:ne {#1}{\l__pdfmanagement_firstaid_tmpa_tl} }
   }
\cs_set_eq:NN \@expl@xcolor@set@@ne \__pdfmanagement_firstaid_xcolor_set:nn
\ExplSyntaxOff

\endinput
