% !Mode:: "TeX:DE:UTF-8:Main"

\RequirePackage{pdfmanagement-testphase}
\DeclareDocumentMetadata{uncompress}
%adapted from https://chat.stackexchange.com/transcript/message/54421537#54421537
\documentclass{article}

\pagestyle{empty}

\usepackage{hyperref}

\usepackage{l3pdffield-checkbox}

\newcheckboxappearance* {checkbox/Yes/depth}
  {
    xxxxxxxxxxxxxxx
  }

\newcheckboxappearance* {checkbox/Off/depth}
  {  }
\usepackage{pdflscape,iftex}  

\begin{document}%\showoutput
\Form[NeedAppearances=false]
\ExplSyntaxOn
%\bitset_set_true:Nn  \l__pdffield_Ff_bitset  {NoRotate}
%\bitset_set_true:Nn  \l_pdfannot_F_bitset  {NoRotate}
%\pdfannot_dict_put:nnn{widget}
%%\pdfdict_put:nnn{l__pdfannot/widget}
%{F}{\bitset_to_arabic:N \l_pdfannot_F_bitset}

\ExplSyntaxOff
\rotatebox{45}{form\checkboxfield[%
normal off = checkbox/Off/bear,
normal yes = checkbox/Yes/bear]{checkbox10}}

\newpage
%\begin{landscape} 

form\checkboxfield[%
normal off = checkbox/Off/bear,
normal yes = checkbox/Yes/bear]{checkbox10}

\hspace*{5cm}
\ExplSyntaxOn
\pdfmanagement_add:nnn{ThisPage}{Rotate}{90}
\bool_gset_true:N\g__pdf_landscape_bool
\ExplSyntaxOff
depth\checkboxfield[%
normal off = checkbox/Off/bear,
normal yes = checkbox/Yes/bear]{checkbox11}

%\end{landscape}

\begin{landscape}



form\checkboxfield[%
normal off = checkbox/Off/bear,
normal yes = checkbox/Yes/bear]{checkbox10}

\hspace*{5cm}
\ExplSyntaxOn
%\pdfmanagement_add:nnn{ThisPage}{Rotate}{90}

\pdfxform_use:n{checkbox/Yes/bear}

\rotatebox{45}{\pdfxform_use:n{checkbox/Yes/bear}}

T\bool_gset_true:N\g__pdf_landscape_bool
\ExplSyntaxOff
depth\checkboxfield[%
normal off = checkbox/Off/bear,
normal yes = checkbox/Yes/bear]{checkbox11}

\end{landscape}
\end{document}
1: \checkboxfield{checkbox1}

   \checkboxfield{checkbox1}

2: \checkboxfield{checkbox2}

3: \checkboxfield{checkbox3}

1: \checkboxfield{checkbox1}

3: \checkboxfield{checkbox3}

\iftutex
4: \checkboxfield[%
normal off = checkbox/Off/unicode,
normal yes = checkbox/Yes/unicode]{checkbox4}
\fi

5: \checkboxfield[%
normal off = checkbox/Off/tikz,
normal yes = checkbox/Yes/tikz]{checkbox5}

6: \checkboxfield[%
normal off = checkbox/Off/bear,
normal yes = checkbox/Yes/bear]{checkbox6}


2: \checkboxfield[%
normal off = checkbox/Off/bear,
normal yes = checkbox/Yes/bear]{checkbox2}



depth\checkboxfield[%
normal off = checkbox/Off/depth,
normal yes = checkbox/Yes/depth]{checkbox7}


\end{document}

%%%

Field dict
Ft     : /Btn /Tx /Ch /Sig
Parent : OR
Kids: array, other fields or annot/widget
T: partial fieldname (test string)
TU: alternate description (test string)
TM: mapping name
Q integer (variable text field)
Ff: flags ->annot/Field
V: value            % not pushbutton
DV: default value   % not pushbutton
AA: Action dict ... -> see below
Opt: array of strings, connected to kids
     or for choices, choices
TI integer (lists)
I array Ch (complicated ...)

/DA ( 0 0 1 rg /Ti 12 Tf ) %text field
/MaxLen                    %text field

Lock dict (Sig)
SV dict (Sig)




Connected widget:
/AS default appearance from AP ( here/Yes or /Off)
% Appearance
%checkbox
/AP <</N <</Yes 2 0 R /Off 3 0 R>>>>
/C / Border /BS

/OC ?
/Structparens?
/F flags


AA: Submit:
  /S   /SubmitForm
  /F   file /URI (/F ( ftp : / / www . beatles . com / Movies / AbbeyRoad . mov )
  /Fields array

  /S /ImportData
  /F file

  /S /ResetData
  /Fields array

  /S /JavaScript
  /JS text string or stream 